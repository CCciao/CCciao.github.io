<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <style>
        span {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 3px solid #3c3c3c;
            margin-right: 3px;
            transition: all 0.5s ease-in-out;
        }
    </style>
    <div id="box"></div>

    <script>
        window.onload = function () {
            const map = [
                [3, 2, 1, 6, 5, 4, 9, 8, 7, 0],
                [0, 1, 2, 3, 4, 8, 9, 7, 5, 6]
            ];
            const initColor = ['red', 'blue', 'green', 'brown', '#e2e2e2', 'pink', 'orange', '#ccc', '#3effff', '#4f5fff'];
            let checks = 0;
            let box = document.querySelector('#box');
            (function init() {
                for (let i = 0; i < 2; i++) {
                    let br = document.createElement('br');
                    box.append(br);
                    for (let j = 0; j < 10; j++) {
                        let span = document.createElement('span');
                        span.style.backgroundColor = initColor[map[i][j]];
                        span.mycolor = initColor[map[i][j]];
                        box.append(span);
                    }
                }
                let count = document.createElement('p');
                count.innerHTML = '点击了:0次'
                box.append(count);
                setTimeout(function () {
                    document.querySelectorAll('span').forEach((span) => span.style.backgroundColor = 'black')
                }, 3000)
            })();
            (function checkIt() {
                let spans = document.querySelectorAll('span');
                let checkarr = []
                for (let i = 0; i < spans.length; i++) {
                    spans[i].addEventListener('click', function (e) {
                        addCount();
                        e.target.style.backgroundColor = e.target.mycolor;
                        checkarr.push(e.target);
                        if (checkarr.length === 2) {
                            if (checkarr[0] !== checkarr[1] && checkarr[0].mycolor === checkarr[1].mycolor) {
                                checkarr.forEach(function (check) {
                                    removeEventListener('click', check);
                                })
                                checkarr = []
                            } else {
                                let oldcheckarr = { ...checkarr }
                                console.log(oldcheckarr)
                                setTimeout(() => {
                                    oldcheckarr[0].style.backgroundColor = 'black';
                                    oldcheckarr[1].style.backgroundColor = 'black';
                                }, 1000)
                                checkarr = [];
                            }
                        }
                    }
                    )
                }
            })();
            function addCount() {
                let count = document.querySelector('p');
                checks += 1;
                count.innerHTML = '点击了:' + checks + '次';
            }
            (function addTimer() {
                let p = document.createElement('p');
                let time = 300;
                box.append(p);
                let t = setInterval(() => {
                    if (time === 0) {
                        clearInterval(t);
                        alert('game over');
                    }
                    time -= 1;
                    p.innerHTML = '时间:' + time + 's';
                }, 1000);
            })();
        }

    </script>
</body>

</html>